# ADR-0006 – Выбор СУБД: PostgreSQL

- Статус: принято
- Дата: 2025-10-20
- Владельцы: DBA, backend‑разработчик, тимлид
- Связанные документы:
  - `docs/db-schema.md`
  - `docs/db-schema.ru.md`
  - `docs/adr/0003-database-schema-and-relations.md`

## Контекст

На старте проекта команде нужно было выбрать **реляционную СУБД** для MVP MedAgg.
Основные требования:

- надёжная работа с транзакционными нагрузками;
- хорошая интеграция с Django ORM;
- открытое ПО, доступное студентам и для учебных стендов;
- при наличии – удобная работа с JSON и полнотекстовым поиском.

DBA также хотели использовать систему, с которой уже есть практический опыт.

## Решение

Мы выбрали **PostgreSQL** в качестве основной СУБД для MVP.

## Обоснование

Основные аргументы в пользу PostgreSQL:

- отличная поддержка в Django ORM и Python‑экосистеме;
- мощный SQL‑диалект (JSONB, оконные функции, богатые индексы);
- открытая лицензия, широкое распространение в индустрии и в учебных проектах;
- удобно запускать в Docker, в том числе на относительно слабом железе
  (маленький сервер или Raspberry Pi);
- DBA в команде уже имеют опыт настройки и сопровождения PostgreSQL.

## Рассмотренные альтернативы

- **MySQL / MariaDB**  
  Плюсы:
  - также широко используется, хорошая экосистема;  
  Минусы:
  - команде удобнее возможности PostgreSQL, а DBA более привычен именно этот стек.

- **SQLite** (как основная БД, а не только для разработки)  
  Плюсы:
  - очень простая настройка, файл на диске;  
  Минусы:
  - не лучшим образом подходит для многопользовательского серверного сценария;
  - менее удобна в контейнеризованной среде для данного проекта.

## Последствия

Положительные:

- единая СУБД для окружений разработки и демонстрации;
- возможность при необходимости использовать специфичные функции PostgreSQL
  (JSONB, полнотекстовый поиск и т.д.);
- согласованность с умениями DBA и с подготовленным SQL‑скриптом.

Отрицательные / риски:

- требуется отдельный сервис БД (контейнер) даже для небольших демо;
- чуть больше операционных усилий по сравнению с вариантом «только SQLite»,
  но это приемлемо для MVP.

## Ссылки

- Конфигурация сервиса БД в `docker-compose.yml`
- SQL‑скрипт `БД.sql` – фактическая схема для PostgreSQL.
