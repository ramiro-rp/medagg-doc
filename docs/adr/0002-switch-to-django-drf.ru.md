# ADR-0002 – Переход на Django + Django REST Framework

- Статус: принято
- Дата: 2025-11-10
- Владельцы: Backend-разработчик, тимлид
- Связанные митинги: понедельничные митинги ноября 2025 (фокус на backend)

## Контекст

После первых экспериментов с **FastAPI** команда заново оценила потребности
backend-а для MVP и последующего развития. Основные наблюдения:

- проект использует достаточно стандартную **реляционную модель данных**
  (наборы данных, изображения, справочники, коллекции);
- нужен полноценный **админ-интерфейс** для управления наборами, справочниками
  и пользовательскими операциями без ручной разработки всего с нуля;
- у большинства участников команды есть практический опыт с **Django**.

Использование FastAPI в сочетании с отдельными компонентами для ORM, админки,
миграций и конфигурации стало выглядеть тяжелее, чем использование
цельного стека на базе Django.

## Решение

Мы приняли решение **перейти на стек Django + Django REST Framework (DRF)**
для реализации backend-а.

## Обоснование

Ключевые аргументы в пользу перехода:

- Django предоставляет зрелый ORM и готовый админ-интерфейс;
- DRF даёт набор проверенных инструментов для построения REST API
  (serializers, viewsets, browsable API, throttling и т.п.);
- коллективный опыт команды с Django / DRF выше, чем с FastAPI;
- для типичного IO-нагруженного веб-API с реляционной БД стек Django + DRF
  более чем достаточен и позволяет двигаться быстрее и безопаснее.

Что касается документации API:

- вместо встроенной документации FastAPI мы можем использовать
  **расширения для DRF** (например, `drf-spectacular`, `drf-yasg`) для
  генерации схем OpenAPI и интерактивных страниц;
- это сохраняет документацию API внутри экосистемы Django / DRF.

## Рассмотренные альтернативы

- **Остаться на FastAPI и инвестировать в обвязку**
  - Плюсы:
    - сохранить уже проделанную работу;
    - современный async-first подход.
  - Минусы:
    - дополнительные усилия на админку и типовые вещи;
    - стек отходит от основной зоны экспертизы команды.

- **Гибридный вариант**: Django для админки, FastAPI для публичного API
  - Плюсы:
    - каждый фреймворк используется по назначению.
  - Минусы:
    - усложнение эксплуатации;
    - два фреймворка, два набора паттернов и конфигураций.

## Последствия

Положительные:

- более простой и однородный backend-стек;
- проще онбординг новых разработчиков, которые уже знакомы с Django;
- готовый админ-интерфейс для управления каталогом и справочниками.

Отрицательные / риски:

- стоимость миграции с первоначального прототипа на FastAPI;
- DRF не является async-first по умолчанию, но для текущих требований MVP
  это приемлемый компромисс.

## Ссылки

- ADR-0001 – начальный выбор FastAPI
- Репозиторий `medagg-backend` (реализация на Django + DRF).
